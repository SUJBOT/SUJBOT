{
  "models": {
    "llm_model": "gpt-4o-mini",
    "llm_provider": null,
    "embedding_model": "text-embedding-3-large",
    "embedding_provider": "openai"
  },
  "storage": {
    "backend": "postgresql",
    "postgresql": {
      "connection_string_env": "DATABASE_URL",
      "pool_size": 20,
      "dimensions": 3072
    },
    "faiss": {
      "path": "vector_db"
    }
  },
  "extraction": {
    "enable_ocr": true,
    "ocr_engine": "tesseract",
    "ocr_language": [
      "ces",
      "eng"
    ],
    "ocr_recognition": "accurate",
    "extract_tables": true,
    "table_mode": "ACCURATE",
    "extract_hierarchy": true,
    "enable_smart_hierarchy": true,
    "hierarchy_tolerance": 0.8,
    "filter_rotated_text": true,
    "rotation_min_angle": 25.0,
    "rotation_max_angle": 65.0,
    "generate_summaries": true,
    "summary_model": null,
    "summary_max_chars": 150,
    "summary_style": "generic",
    "use_batch_api": true,
    "batch_api_poll_interval": 5,
    "batch_api_timeout": 43200,
    "generate_markdown": true,
    "generate_json": true
  },
  "unstructured": {
    "strategy": "hi_res",
    "model": "yolox",
    "languages": [
      "ces",
      "eng"
    ],
    "detect_language_per_element": true,
    "infer_table_structure": true,
    "extract_images": false,
    "include_page_breaks": true
  },
  "hierarchy_detection": {
    "enable_generic_hierarchy": true,
    "hierarchy_signals": [
      "type",
      "font_size",
      "spacing",
      "numbering",
      "parent_id"
    ],
    "clustering_eps": 0.15,
    "clustering_min_samples": 2
  },
  "summarization": {
    "speed_mode": "fast",
    "temperature": 0.3,
    "max_tokens": 100,
    "retry_on_exceed": true,
    "max_retries": 3,
    "max_workers": 20,
    "min_text_length": 50,
    "enable_batching": false,
    "batch_size": 8
  },
  "context_generation": {
    "enable_contextual": true,
    "temperature": 0.3,
    "max_tokens": 150,
    "include_surrounding": true,
    "num_surrounding_chunks": 1,
    "fallback_to_basic": true,
    "batch_size": 20,
    "max_workers": 10,
    "use_batch_api": true,
    "batch_api_poll_interval": 5,
    "batch_api_timeout": 43200
  },
  "chunking": {
    "max_tokens": 512,
    "tokenizer_model": "text-embedding-3-large",
    "enable_sac": true
  },
  "embedding": {
    "batch_size": 64,
    "cache_enabled": true,
    "cache_size": 1000,
    "normalize": true
  },
  "clustering": {
    "algorithm": "hdbscan",
    "n_clusters": null,
    "min_size": 5,
    "max_clusters": 50,
    "min_clusters": 5,
    "layers": [
      3
    ],
    "enable_labels": true,
    "enable_visualization": false,
    "visualization_dir": "output/clusters"
  },
  "hybrid_search": {
    "enable": true,
    "fusion_k": 60
  },
  "knowledge_graph": {
    "enable": true,
    "llm_provider": "openai",
    "llm_model": "gpt-4o-mini",
    "backend": "neo4j",
    "export_path": "./output/graphs/knowledge_graph.json",
    "verbose": true,
    "min_entity_confidence": 0.6,
    "min_relationship_confidence": 0.5,
    "enable_entity_extraction": true,
    "enable_relationship_extraction": true,
    "enable_cross_document_relationships": false,
    "max_retries": 3,
    "retry_delay": 1.0,
    "timeout": 300,
    "log_path": "./logs/kg_extraction.log"
  },
  "entity_extraction": {
    "temperature": 0.0,
    "min_confidence": 0.6,
    "extract_definitions": true,
    "normalize": true,
    "batch_size": 20,
    "max_workers": 10,
    "cache_results": true,
    "include_examples": true,
    "max_per_chunk": 50,
    "enabled_types": null
  },
  "relationship_extraction": {
    "temperature": 0.0,
    "min_confidence": 0.5,
    "extract_evidence": true,
    "max_evidence_length": 200,
    "within_chunk": true,
    "cross_chunk": true,
    "from_metadata": true,
    "batch_size": 10,
    "max_workers": 10,
    "cache_results": true,
    "max_per_entity": 100,
    "enabled_types": null
  },
  "neo4j": {
    "enabled": false,
    "uri_env": "NEO4J_URI",
    "username_env": "NEO4J_USERNAME",
    "password_env": "NEO4J_PASSWORD",
    "database": "neo4j",
    "max_connection_lifetime": 3600,
    "max_connection_pool_size": 50,
    "connection_timeout": 30,
    "create_indexes": true,
    "create_constraints": true
  },
  "entity_deduplication": {
    "enable": true,
    "use_embeddings": false,
    "similarity_threshold": 0.9,
    "use_acronym_expansion": false,
    "acronym_fuzzy_threshold": 0.85,
    "custom_acronyms": null,
    "apoc_enabled": true,
    "embedding_model": "text-embedding-3-large",
    "embedding_batch_size": 100,
    "cache_embeddings": true,
    "create_constraints": true
  },
  "graph_storage": {
    "backend": "simple",
    "simple_store_path": "./data/graphs/simple_graph.json",
    "export_json": true,
    "export_path": "./data/graphs/knowledge_graph.json",
    "deduplicate_entities": true,
    "merge_similar_entities": false,
    "similarity_threshold": 0.9,
    "track_provenance": true
  },
  "agent": {
    "model": "claude-haiku-4-5",
    "max_tokens": 8192,
    "temperature": 0.3,
    "enable_tool_validation": true,
    "debug_mode": false,
    "vector_store_path": "vector_db",
    "knowledge_graph_path": "output/knowledge_graph.json",
    "enable_prompt_caching": true,
    "enable_context_management": true,
    "context_management_trigger": 50000,
    "context_management_keep": 3,
    "query_expansion_model": "gpt-4o-mini"
  },
  "agent_tools": {
    "default_k": 6,
    "enable_reranking": false,
    "reranker_candidates": 50,
    "reranker_model": "bge-reranker-large",
    "enable_graph_boost": true,
    "graph_boost_weight": 0.3,
    "max_document_compare": 3,
    "compliance_threshold": 0.7,
    "context_window": 2,
    "lazy_load_reranker": false,
    "lazy_load_graph": true,
    "cache_embeddings": true
  },
  "cli": {
    "show_citations": true,
    "citation_format": "inline",
    "show_tool_calls": true,
    "show_timing": true,
    "enable_streaming": true,
    "save_history": true,
    "history_file": ".agent_history",
    "max_history_items": 1000
  },
  "pipeline": {
    "log_level": "INFO",
    "log_file": "logs/pipeline.log",
    "data_dir": "data",
    "output_dir": "output"
  },
  "multi_agent": {
    "enabled": true,
    "orchestrator": {
      "model": "claude-haiku-4-5",
      "max_tokens": 1024,
      "temperature": 0.1,
      "enable_prompt_caching": false,
      "system_prompt_file": "prompts/agents/orchestrator.txt"
    },
    "agents": {
      "extractor": {
        "model": "claude-haiku-4-5",
        "max_tokens": 2048,
        "temperature": 0.3,
        "timeout_seconds": 30,
        "enable_prompt_caching": false,
        "tools": ["search", "expand_context", "get_document_info"],
        "system_prompt_file": "prompts/agents/extractor.txt"
      },
      "classifier": {
        "model": "claude-haiku-4-5",
        "max_tokens": 1024,
        "temperature": 0.2,
        "timeout_seconds": 20,
        "enable_prompt_caching": false,
        "tools": ["filtered_search", "explain_results", "get_document_list"],
        "system_prompt_file": "prompts/agents/classifier.txt"
      },
      "compliance": {
        "model": "claude-haiku-4-5",
        "max_tokens": 2048,
        "temperature": 0.1,
        "timeout_seconds": 45,
        "enable_prompt_caching": false,
        "tools": ["graph_search", "assess_confidence", "exact_match_search"],
        "system_prompt_file": "prompts/agents/compliance.txt"
      },
      "risk_verifier": {
        "model": "claude-haiku-4-5",
        "max_tokens": 2048,
        "temperature": 0.2,
        "timeout_seconds": 45,
        "enable_prompt_caching": false,
        "tools": ["multi_doc_synthesizer", "similarity_search", "get_chunk_context"],
        "system_prompt_file": "prompts/agents/risk_verifier.txt"
      },
      "citation_auditor": {
        "model": "claude-haiku-4-5",
        "max_tokens": 1024,
        "temperature": 0.1,
        "timeout_seconds": 15,
        "enable_prompt_caching": false,
        "tools": ["get_document_info", "exact_match_search", "get_chunk_context"],
        "system_prompt_file": "prompts/agents/citation_auditor.txt"
      },
      "gap_synthesizer": {
        "model": "claude-haiku-4-5",
        "max_tokens": 3072,
        "temperature": 0.4,
        "timeout_seconds": 60,
        "enable_prompt_caching": false,
        "tools": ["browse_entities", "graph_search", "multi_doc_synthesizer"],
        "system_prompt_file": "prompts/agents/gap_synthesizer.txt"
      },
      "report_generator": {
        "model": "claude-haiku-4-5",
        "max_tokens": 4096,
        "temperature": 0.3,
        "timeout_seconds": 30,
        "enable_prompt_caching": false,
        "tools": ["list_available_tools"],
        "system_prompt_file": "prompts/agents/report_generator.txt"
      }
    },
    "routing": {
      "complexity_threshold_low": 30,
      "complexity_threshold_high": 70,
      "enable_parallel_execution": false,
      "max_parallel_agents": 3,
      "complexity_model": "claude-haiku-4-5-20251001"
    },
    "caching": {
      "enable_regulatory_cache": true,
      "enable_contract_cache": true,
      "enable_system_cache": true,
      "cache_ttl_hours": 24,
      "regulatory_docs_path": "data/regulatory_templates",
      "contract_templates_path": "data/contract_templates"
    },
    "checkpointing": {
      "backend": "none",
      "postgresql": {
        "connection_string_env": "DATABASE_URL",
        "table_name": "agent_checkpoints"
      },
      "enable_state_snapshots": false,
      "snapshot_interval_queries": 5,
      "recovery_window_hours": 24
    },
    "langsmith": {
      "enabled": false,
      "api_key": "",
      "project_name": "sujbot2-multi-agent",
      "trace_logging_level": "INFO",
      "sample_rate": 1.0
    },
    "clarification": {
      "enabled": false,
      "policy": {
        "trigger_after_agent": "extractor",
        "quality_threshold": 0.60,
        "min_complexity_score": 40,
        "always_ask_if_zero_results": true,
        "never_ask_for_simple_queries": true,
        "max_clarifications_per_query": 2
      },
      "quality_detection": {
        "require_multiple_failures": true,
        "min_failing_metrics": 2,
        "metrics": {
          "retrieval_score": {
            "enabled": true,
            "weight": 0.30,
            "threshold": 0.65
          },
          "semantic_coherence": {
            "enabled": true,
            "weight": 0.25,
            "threshold": 0.30
          },
          "query_pattern": {
            "enabled": true,
            "weight": 0.25,
            "threshold": 0.50
          },
          "document_diversity": {
            "enabled": true,
            "weight": 0.20,
            "threshold": 5.0
          }
        }
      },
      "question_generation": {
        "model": "claude-haiku-4-5-20251001",
        "temperature": 0.4,
        "max_tokens": 512,
        "min_questions": 2,
        "max_questions": 5,
        "enable_prompt_caching": true
      },
      "user_interaction": {
        "timeout_seconds": 300,
        "allow_skip": true,
        "enable_multi_round": true,
        "max_rounds": 2
      },
      "query_enrichment": {
        "strategy": "append_with_context",
        "template": "{original_query}\\n\\n[Context]: {user_response}",
        "max_enriched_length": 500
      }
    },
    "cost_optimization": {
      "enable_cost_tracking": true,
      "enable_model_selection": false,
      "budget_cents_per_query": 100,
      "model_preference": "cost",
      "fallback_model": "claude-haiku-4-5-20251001"
    }
  }
}
